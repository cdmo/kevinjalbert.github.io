<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <title>Vim Substitution Feedback Using `vim-over` — Kevin Jalbert</title> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Posts — Kevin Jalbert" href="/feed.xml"/> </head> <div class=container> <div class=header> <div class="col-xs-4 col-md-4 banner"> <a href="/">Kevin Jalbert</a> </div> <div class="col-xs-8 col-md-8 navigation"> <ul> <li><input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on></li> <li><a href="/about/">About</a></li> <li><a href="/now/">Now</a></li> </ul> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Vim Substitution Feedback Using <code>vim-over</code></p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class=article__date>February 29, 2016 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>1 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/vim-substitution-feedback-using-vim-over/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/vim/">vim</a> </div> </div> </div> <div class=article__separator></div> <p>It is common while in vim to perform substitution tasks over the text you are editing. This is often accomplished using the following command:</p> <pre class="highlight plaintext"><code>:%s/&lt;find&gt;/&lt;replacement&gt;/g
</code></pre> <p>The <code>%s</code> command will perform substitution over every line within the buffer. The <code>/&lt;find&gt;/&lt;replace&gt;</code> specifies the substitution to perform. Finally the <code>/g</code> indicates that this should apply to multiple occurrences if they are present on the same line.</p> <p>This works great, although there is little affordance in determining whether the specified <code>&lt;find&gt;</code> will hit the matches you are interested in. The aforementioned command is a <em>all-or-nothing</em> with respect to execution, there is no <em>visual feedback</em> until you execute the command.</p> <h1>Visual Feedback via vim-over</h1> <p>The <a href="https://github.com/osyo-manga/vim-over">vim-over</a> plugin provides a dynamic approach for visual feedback while performing substitutions. It is extremely useful while crafting specific <code>&lt;find&gt;</code> patterns.</p> <p><img alt="Visual Feedback Demo" width=440 height=320 src="/images/2016-02-29-vim-substitution-feedback-using-vim-over/visual-feedback-demo.gif"/></p> <h1>Tips and Tricks</h1> <p>I have three vim maps that I use to simplify and enhance my substitutions.</p> <h2>#1 - Substitute Word</h2> <p>This mapping (<code>&lt;leader&gt;s</code>) will find and replace the text under the cursor using <code>vim-over</code> for visual feedback. After the mapping has been executed you are left where you simply type the <code>&lt;replacement&gt;/g</code>.</p> <pre class="highlight plaintext"><code>nnoremap &lt;leader&gt;s :OverCommandLine&lt;CR&gt; %s/&lt;C-r&gt;&lt;C-w&gt;/
</code></pre> <h2>#2 - Global Substitution</h2> <p>This mapping (<code>&lt;leader&gt;v</code>) will perform a global substitution using <code>vim-over</code> for visual feedback. After the mapping has been executed you are left where you type the <code>&lt;find&gt;/&lt;replacement&gt;/g</code>.</p> <pre class="highlight plaintext"><code>function! VisualFindAndReplace()
    :OverCommandLine %s/
    :noh
endfunction
nnoremap &lt;Leader&gt;v :call VisualFindAndReplace()&lt;CR&gt;
</code></pre> <h2>#3 - Visual Substitution</h2> <p>This mapping (<code>&lt;leader&gt;v</code> while in visual mode) will perform a substitution only within the visually selected text using <code>vim-over</code> for visual feedback. After the mapping has been executed you are left where you type the <code>&lt;find&gt;/&lt;replacement&gt;/g</code>.</p> <pre class="highlight plaintext"><code>function! VisualFindAndReplaceWithSelection() range
    :'&lt;,'&gt;OverCommandLine s/
    :noh
endfunction
xnoremap &lt;Leader&gt;v :call VisualFindAndReplaceWithSelection()&lt;CR&gt;
</code></pre> <div id=disqus_thread></div> <script>
//<![CDATA[
                  var disqus_shortname = 'kevinjalbert';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </div> </div> </div> </body> <div class="col-md-12 footer__copywrite"> &copy; 2015 Kevin Jalbert </div> </html> <script src="/javascripts/app.js"></script> <script>!function(e,a,n,t,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(n),s=a.getElementsByTagName(n)[0],o.async=1,o.src=t,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-16620161-5","kevinjalbert.com"),ga("send","pageview");</script>